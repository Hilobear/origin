​               

#           计算机组成原理



## 一、概论

#### 1.1计算机硬件组成

1.输入设备：输入设备的主要功能是将程序和数据以机器所能识别和接受的信息形式输入进计算机

2.输出设备：输出设备是将计算机处理的结果以人们能够接收的信息形式或其他系统所要求的形式输出。

3.存储器：存储器是计算机的存储部件，是信息存储的核心，用来存放数据和程序。

​                  存储器分为主存储器和辅助存储器。

​                  存储器构成：1.地址寄存器，2.存储体，3.数据寄存器，4.时序控制逻辑

​                  地址寄存器：存放将要访问的存储单元的地址码，由地址译码找到被存储的单元

​                  数据寄存器：数据寄存器存放主存和其他部件的接口，用于从存储器中读出或者写入数据

​                  存储体：各位存储芯片

​                  时序控制逻辑：

4.运算器：运算器和计算机的执行部件，用于对数据的加工处理，完成算术运算和逻辑运算。

5.控制器：cpu中的控制器，可分为微程序控制器和组合式控制器。



## 二、计算机中的数据信息展示

#### 2.1进制转换

   1.任意进制转为10进制：按权相加

​    2.十进制转为任意进制：

​                                      整数：除基取余（对余数进行反向取）

​                                      小数：乘基取余

   3.二、八、十六进制之间的转换

#### 2.2带符号数的表示

##### 2.2.1原码表示

​        1.纯小数原码定义：

​        ![码小](D:\picture\CO\原码小数.png)

​         2.纯整数原码定义：![](D:\picture\CO\原码整数.png)

##### 2.2.2补码表示

​      1.纯小数补码定义：

![](D:\picture\CO\补码小数.png)

​       2.整数补码定义：

![](D:\picture\CO\整数补码.png)



##### 2.2.5真值，原码，反码，补码，移码之间的关系



![](D:\picture\CO\码关系.png)



#### 2.3数的定点表示与浮点表示

##### 2.3.1定点数

1.定点小数：







##### 2.3.2浮点数

**浮点表示**：是指各个数的小数点位置不是固定不变的，而是可以浮动的。



​     即 ![](D:\picture\CO\浮点符号.png) 中的 e 值是可变的。

![](D:\picture\CO\浮点数.png)

其中S为尾数（在规格化时，1/2<S<1），R为默认值2，e为阶码

**规格化定义**：

   原码表示的规格化数：

​    若[S]原＝Sf.S1S2…Sn，则满足       ![](D:\picture\CO\规格化数S.png)    的数为规格化数。



 补码表示的规格化数：![](D:\picture\CO\补码规格化数.png)

#### 2.7数据校验码

#### 2.7.1奇偶校验码

##### 1.奇偶校验码的编码方式

![](D:\picture\CO\奇偶校验码示例.png)

若为偶校验时，Peven等于对每个位取异或

​                             Peven＝A6⊕A5⊕A4⊕A3⊕A2⊕A1⊕A0

若为奇校验时，Podd=Peven（非）

当A6A5A4A3A2A1A0中，若1的个数为奇数，则Podd=0

##### 2.奇偶校验码的校验

偶校验错：E＝A6⊕A5⊕A4⊕A3⊕A2⊕A1⊕A0⊕Peven

奇校验错：E＝！（A6⊕A5⊕A4⊕A3⊕A2⊕A1⊕A0⊕Podd）

**E＝0，表示无错； E＝1，表示校验出错**

##### 3.奇偶校验码的校验能力

  奇偶校验码只能发现奇数位个错误，而无法发现偶数位个错误，而且即使发现奇数位个错误也无法确定出错的位置；因而无法自动纠正错误。

  但由于现代计算机可靠性比较高，出错概率很低，而出错中只有一位出错的概率最高，因此用奇偶校验检测一位出错，能够满足一般可靠性要求。

  在CPU与主存的信息传送过程中，奇偶校验被广泛应用。

#### 2.7.1海明威校验码

##### 1.海明校验码校验位数的选择

设有效信息位的位数为n，校验位数为k，则能够检测一位出错并能自动纠正一位错误的海明校验码应满足下面关系：

​                                                                         2k-1≥n+k







## 三、运算方法与运算器

### 3.1运算器的设计方法











### 3.2定点补码加减运算

#### 3.2.1补码运算的基础

1.补码运算的基本关系：

​           ![](D:\picture\CO\补码运算基础.png)

#### 3.2.2  溢出判别与变形补码

##### 1.对结果溢出进行判断

根据参加运算的符号位和结果的符号位：要求参加运算的数的符号位为同号，结果运算操作数

![](D:\picture\CO\补码加减结果溢出.png)



![](D:\picture\CO\溢出判断.png)

##### 2.采用变形补码运算、

![](D:\picture\CO\变形补码.png)

在原来基础上，对mod进行扩展，

变形补码的形式：  ![[x]变形补＝Xf1Xf2 . X1X2…Xn](D:\picture\CO\变形补.png) 

此时对溢出进行判断，根据

![](D:\picture\CO\溢出.png)

![](D:\picture\CO\溢出1.png)



### 3.3 定点乘法运算

#### 3.3.1  原码乘法运算

1.对符号位单独处理

2.将数值位的绝对值相乘



![](D:\picture\CO\原码数值位相乘.png)

从这可以看出，首先（0+x乘y4），然后将结果右移，再加x乘y3.。。。。。



![](D:\picture\CO\原码乘法.png)

寄存器A保存部分积高位，初始为0；

寄存器C为部分积低位，初始值为乘数；

寄存器B放被乘数；



![](D:\picture\CO\原码乘法逻辑硬件.png)







#### 3.3.1  补码乘法运算

##### 3.3.1.5布斯乘法

![](D:\picture\CO\布斯乘法.png)

![](D:\picture\CO\布斯乘法例题.png)



**[x]补和[-x]补都为变形补码，[y]补不是，且给乘数[y]补增加一个yn+1，ynyn+1用来判断下面进行什么操作**

00，01，部分积+0直接右移；

01加[x]补，10加[-x]补

一共运算n+1次，n为数值位个数最后一个只运算不移位，注意移位时，按照补码移位规则来做，

![](D:\picture\CO\布斯乘法例题2.png)







### 3.4  补码除法运算







### 3．5  浮点四则运算

#### 3.5.1  浮点加减运算

![](D:\picture\CO\浮点运算加减法.png)



**1.对阶**

就是将两束=数的小数点对齐，标志就是两数的阶码一致

![](D:\picture\CO\阶码对阶.png)

**2.对尾数求和**

 

**3．结果规格化**

![](D:\picture\CO\浮点规格化.png)

![在](D:\picture\CO\浮点符号1.png)

![](D:\picture\CO\规格化浮点加载流程.png)



#### 3.6  运算器组成





## 四、存储器系统



### 4.2半导体随机存储器

![](D:\picture\CO\半导体随机存储器.png)

#### 4.2半导体随机存储器的分类

#### 4.2.1RAM

**1）静态RAM（Static RAM，SRAM）**

SRAM中每一个存储单位都由一个触发器构成，可以存储一个二进制位，只要不断电就可以保持其中存储的二进制数据不丢失。

• SRAM的特点是读写速度快，但通常容量不是很大。

• SRAM属于易失性存储器，断电后会丢失其中存储的内容。



**2）动态RAM （Dynamic RAM，DRAM）**

• DRAM采用MOS管和电容存储信息。

• DRAM减少了每一个存储单位中所需要的晶体管的数目，大大提高了存储密度。但由于电容本身不可避免地会产生漏电，因此DRAM存储器需要频繁的刷新操作。

• 与SRAM相比，DRAM的存储密度高、功耗小，但因为必须含有刷新电路，所以在电路上比较复杂。

• DRAM同样属于易失性存储器，断电后会丢失其中存储的内容

#### 4.2.2 半导体随机存取存储器单元电路

#### 4.2.3 半导体随机存储器芯片的结构及实例

**1.字片式**

一个行地址控制一行，且位数就是一行控制存储元决定

**2.位片式**

一个行地址控制一行，但是列地址控制的列数觉得此芯片的位数

**3.半导体芯片实例**

SRAM,DRAM采取地址复用技术，RAS和CAS分别控制行，列地址的读入

#### 4.2.4 半导体存储器的组成（重点）

首先计算半导体存储器所需的芯片数是多少



**1．位扩展** 

位扩展的连接方式：

• ① 将所有存储器芯片的地址线、片选信号线和读/写控制线均对应的并接在一起，连接到地址和控制总线的对应位上。

• ② 将各芯片的数据线单独列出，分别接到数据总线的对应位

![](D:\picture\CO\位扩展示例.png)






**2.字扩展**

字扩展的连接方式：

• ① 将所有芯片的地址线、数据线、读/写控制线均对应地并接在一起，连接到地址、数据、控制总线的对应位上。

• ② 由片选信号区分被选芯片。

• 片选信号：通常由高位地址经译码进行控制，通过片选译码的方式实现字扩展

• 高位地址：存储器总地址减去芯片内部寻址的地址得到的地址

![](D:\picture\CO\字扩展示例.png)

地址编码方式：

**3．字和位同时扩展**



![](D:\picture\CO\字位同时扩展.png)



### 4.3 ROM

### 4.4并行存储器

### 4.5 高速缓冲存储器(Cache)

**由于时间局部性和空间局部性，使用cache能够提高CPU的访存速度**

#### **4.51.Cache的基本结构**

 结构：主存的一个块对应cache的一个块，一个块中对应的字相等，

 地址：

![](D:\picture\CO\cache地址.png)



b相同是因为主存和cache一个块大小一样，所有偏移地址一样，主存中的块跟cache中块的多少不一样，

#### 4.5.2* Cache的地址映像方式

##### 1．直接映像方式

##### 2.全相联映像及变换

##### 3．组相联映像方式

先对cache进行分组，再按照cache中的组数，对主存进行分组，如图所示

![](D:\picture\CO\组像连映像方式.png)



**规定：主存中的任何一组只能映像到Cache中的某一固定组，但可调入其组内的任意块中。**



![](D:\picture\CO\主存和cache地址.png)



### 4.7  辅助存储器

#### 1.磁盘存储器





## 五、指令系统

### 5.1机器指令

### 5.2  寻址方式

### 5.3  指令类型及功能

### 5.4  指令系统的两种设计风格

## 六、控制系统与CPU

指令执行流程

![](D:\picture\CO\指令执行流程.png)





### 6.3  CPU的总体结构

CPU即中央处理器，它包含运算器和控制器两个部分。CPU的功能为：

⑴ 程序控制：标准程序按所要求的次序正确执行。

⑵ 操作控制：管理如何产生每条指令所需的操作信号，送往有关部件，控制完成指令规定的操作。

⑶ 时序控制：对各种操作实施时间上的定时，使计算机有条不紊地工作。

⑷ 数据加工：对数据进行算术逻逻运算处理。

(5)异常控制：外设异常中断

#### 6.3.2  数据通路结构及指令流程分析

1.单总线方式：

#### 6.6  微程序控制器设计

##### 6.1.1基本概念



##### 2.微程序控制器的模型及其工作过程

![](D:\picture\CO\微程序控制流程.png)

##### 3.微程序控制器的主要部分

#### 6.6.2  微指令的编译方法









## 七、总线技术

## 八、IO设备

## 九、I/O系统组织

### 9.2 I/O接口



![](D:\picture\CO\IO接口基本组成.png)



### 9.3 程序控制方式

